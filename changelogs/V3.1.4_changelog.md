# Version 3.1.4 – Critical Security Fix, New Metadata Provider, ACSM Support and more! 🔐📚✨

> [!CAUTION]
> ## Critical Security Fix 🔒
>  Fixed a critical vulnerability inherited from CW that could expose sensitive configuration data. Please update as soon as possible to ensure your instance remains secure.

## New Features / Changes ✨

- Added Deutsche Nationalbibliothek (German National Library) as a Metadata Provider — thank you to UsamaFoad & GelbPhoenix for the original work! Fixes [Feature Request #376](https://github.com/crocodilestick/Calibre-Web-Automated/issues/376)
- Added ACSM format support (PR #498) — better compatibility for workflows involving Adobe DRM acquisition files
- Documented `customize.py.json` usage (PR #498) to make plugin customization easier and clearer
- Added `USER_AGENT` constant
- Added improved error handling to `hardcover.py` (originally provided by UsamaFoad to AutoCaliWeb)
- Startup sequence cleanup: folded `init-calibre-web-config` into `cwa-init` and adjusted order so `cwa-init` runs first, followed by `svc-calibre-web-automated`, improving reliability on boot
-  Made it possible to test `hardcover.py` through the CLI without CPS to vastly aid further development & future testing

### Now available via the GitHub Container Registry!  🚢💚

- Images will now also be published to the GitHub Container Registry (GHCR) in addition to Docker Hub, making pulls faster and more reliable for some users
- To do so, simply change the image tag in your docker-compose to `ghcr.io/crocodilestick/calibre-web-automated:latest`

### Heads‑up 📝

- We discovered that stripping the ABI tags from Qt6 during image creation (to extend compatibility with older kernels) can break parts of Calibre functionality (e.g., working with PDFs). We’re evaluating the best approach here to maximize stability and compatibility — more updates to follow.

## Bugfixes 🐛

- Fixed 500 Internal Server Error — closes [#504](https://github.com/crocodilestick/Calibre-Web-Automated/issues/504)
- Fixed “Unable to refresh library” — closes [#499](https://github.com/crocodilestick/Calibre-Web-Automated/issues/499)
- Minor refactors and general stability improvements
- Fixed Health Check (endpoint `/health`)
- Changed STABLE_VERSION & INSTALLED_VERSION constants so that they're set once at init by the cwa-init service to avoid potential rate-limiting issues and potential slight performance impacts of previous solution

## Translations 🌍

- Updated Slovenian translations — hvala! 💙

## Thanks 🙏

- Huge thanks to everyone who reported issues, tested, and contributed code this cycle — in particular UsamaFoad and GelbPhoenix for their work on the DNB provider, and all reviewers on PR #498.

## Supporting the Project ❤️

If CWA makes your library life easier and you’re in a position to support development, tips are appreciated and go straight back into testing hardware and tooling:

[Support on Ko‑fi](https://ko-fi.com/crocodilestick/tip)